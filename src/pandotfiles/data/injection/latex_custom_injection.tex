% CUSTOM TEMPLATE
\usepackage{siunitx}
\usepackage[acronym,nomain,nonumberlist]{glossaries}
\makeglossaries

\ExplSyntaxOn
  \NewDocumentCommand{\getenv}{om}
   {
    \sys_get_shell:nnN { kpsewhich ~ --var-value ~ #2 } { } \l_tmpa_tl
    \tl_trim_spaces:N \l_tmpa_tl
    \IfNoValueTF { #1 }
     {
      \tl_use:N \l_tmpa_tl
     }
     {
      \tl_set_eq:NN #1 \l_tmpa_tl
     }
   }
  \ExplSyntaxOff

  \newcommand{\titleprint}{$title$}
  
  \newcommand{\authoremail}{$authoremail$}
  \newcommand{\subtitleprint}{$subtitle$}
  \newcommand{\authorprint}{$for(author)$$author$$sep$, $endfor$}
  \newcommand{\acronyms}{$acronyms$}
  \newcommand{\dateprint}{$if(date)$ $date$ $else$ ~ $endif$}
  \newcommand{\yearprint}{$if(year)$ $year$ $else$ \the\year{} $endif$}
  \newcommand{\docstyleprint}{$docstyle$}
  \newcommand{\idonly}{$if(id)$ $id$ $endif$}
  \newcommand{\idprint}{$if(id)$ id: \idonly $else$ ~ $endif$}
  \newcommand{\tagsprint}{$tagsh$}
  \newcommand{\bibliographyinternefile}{$bibliography-internal$}
  % specific docstyle
  \newcommand{\uldirector}{$uldirector$}
  \newcommand{\uldepot}{$uldepot$}
  \newcommand{\ulprogram}{$ulprogram$}
  \newcommand{\ulabstract}{$ulabstract$}
  \newcommand{\ulresume}{$ulresume$}
  \newcommand{\ulepigraphe}{$ulepigraphe$}
  \newcommand{\uldedicace}{$uldedicace$}
  \newcommand{\ulremerciements}{$ulremerciements$}
  \newcommand{\osajournal}{$if(osajournal)$ $osajournal$ $else$ $journal$ $endif$}
  \newcommand{\osalineno}{$if(osalineno)$ $osalineno$ $else$ $lineno$ $endif$}
  \newcommand{\osaaddress}{$if(osaaddress)$ $osaaddress$ $else$ $address$ $endif$}
  \newcommand{\spieuthorprint}{$for(author)$$author[a]$$sep$\\ $endfor$}
  \makeatletter
    \def\fps@figure{$if(float_placement)$ $float_placement$ $else$ htbp $endif$}
    \def\fps@table{$if(float_placement)$ $float_placement$ $else$ htbp $endif$}
  \makeatother

% Docstyle injection
$if(docstyle)$
  \usepackage{graphicx}
  \usepackage{ifthen}
  % \usepackage{shellesc}
  \input{\TEMPLATEDIR/docstyle-$docstyle$.tex}

    $if(acronyms)$
    $for(acronyms)$
    \newacronym{$acronyms.cmd$}{$acronyms.short$}{$acronyms.long$}
    $endfor$
    $endif$
$endif$
